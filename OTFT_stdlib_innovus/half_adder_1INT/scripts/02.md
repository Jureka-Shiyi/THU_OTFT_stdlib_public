在完成 `02_pg_stripe.tcl` 后，你的 `verify_connectivity` 出现了 **Violations**（违反项）。虽然 `Message Summary` 显示为 0 error，但 `verify_connectivity` 的报告明确指出电源网格（PG Network）存在物理连接性问题。

以下是针对 `VDD` 和 `VSS` 出现的 **IMPVFC-96** 和 **IMPVFC-200** 错误的详细分析与解决方法：

---

## 1. 错误原因深度分析

### **IMPVFC-96: Terminal(s) are not connected**

* **含义**：电源或地线的 **Pin（端口）** 没有连接到你的 PG 网络上。
* **常见场景**：你定义了 IO Pin（VDD/VSS），但在脚本中只画了内部的 Stripe（条带），而没有画 Ring（环）或者没有通过 `sroute` 将 Pin 连到 Ring/Stripe 上。

### **IMPVFC-200: Special Wires: Pieces of the net are not connected together**

* **含义**：电源网格是“断开”的，即存在 **Floating（悬空）** 的金属段。
* **常见场景**：
* 你画了水平的 Stripe 和垂直的 Stripe，但它们交叉的地方**没有打过孔（Via）**。
* 电源环（Ring）和条带（Stripe）之间没有连接。
* 标准单元的电源轨（Follower Rails）还没有生成，导致 Stripe 之间孤立。



---

## 2. 检查与修复步骤

### 第一步：定位问题（可视化检查）

在 Innovus GUI 界面中：

1. 点击顶部菜单：**Verify -> Verify Connectivity...**，确保选项勾选并点击 OK。
2. 打开 **Violation Browser**（通常在右侧工具栏或菜单 `Window -> Violation Browser`）。
3. 点击具体的错误项（如 Net VDD），工具会高亮显示断开的位置。**观察断开点是在 Pin 处，还是在 Stripe 交叉处。**

### 第二步：检查 TCL 脚本逻辑

请核对你的 `02_pg_stripe.tcl` 是否包含以下关键步骤，且顺序是否正确：

1. **Global Net Connect**（声明逻辑连接）：
```tcl
globalNetConnect VDD -type pgpin -pin VDD -inst *
globalNetConnect VSS -type pgpin -pin VSS -inst *

```


2. **Add Ring**（如果设计需要环）：
确保 Ring 覆盖了所有的 IO Pin 位置。
3. **Add Stripe**（添加条带）：
注意是否设置了过孔选项。
4. **关键步骤：Sroute**（建立连接）：
**这是最容易漏掉的一步。** `sroute` 负责将 Standard Cell 的电源轨连接到 Stripe，以及将 Pin 连接到 Ring/Stripe。
```tcl
sroute -connect { blockPin padPin pin corePin floatingStripe } \
       -layerChangeRange { M1 M9 } \
       -blockPinTarget { nearestTarget } \
       -corePinTarget { firstAfterRowEnd } \
       -allowJogging 1 \
       -allowLayerChange 1

```



### 第三步：解决 DRC Violation

你的 log 提到 `VERIFY DRC ...... 2 Viols.`。

* 这通常是因为 Stripe 的间距、宽度不符合技术库（LEF）的规则，或者是打孔（Via）时产生了金属重叠问题。
* 使用 **Violation Browser** 查看 DRC 具体违反了哪一条 Rule（例如 MinWidth, MinSpacing）。

---

## 3. 常见补救方案

| 现象 | 解决方法 |
| --- | --- |
| **Stripe 交叉但不连通** | 检查 `addStripe` 命令中的层级设定，并确保在 `sroute` 中允许 `floatingStripe` 连接。 |
| **IO Pin 悬空** | 检查 Pin 的位置。如果 Pin 在 M1 层，Stripe 在 M3 层，必须运行 `sroute` 来自动打孔连接。 |
| **Standard Cell 没电** | 确保运行过 `sroute -connect { corePin }`，这会在 M1 层生成横向的电源轨道。 |

---

### 建议的操作：

1. **在 GUI 放大查看**：看一看垂直的 Stripe 和水平的走线交叉处有没有小方块（Via）。如果没有，说明你的电源网格只是“看起来交叉”，物理上并没连上。
2. **重新运行脚本时加入 `sroute**`：如果你之前的脚本没写 `sroute`，加上它。

**如果你能把 `02_pg_stripe.tcl` 中 `addStripe` 和 `sroute` 的部分代码贴出来，我可以帮你更精准地定位参数错误。**